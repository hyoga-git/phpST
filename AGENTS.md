# PHP / Laravel 学習ロードマップ（argents）

## 0. 前提・ゴール

### ゴール
- PHP マニュアルの主要部分（S / A / B 項目）を一通り「読んで・手を動かして・理解した」と言える状態にする
- Laravel を読む・書くときに「なんとなく動いてる」ではなく「なぜこう書くのか」が説明できる状態にする
- DI（依存性注入）の基本を理解し、Controller / Service / Repository を自分で設計できる
- DTrace / PIE については「どういう技術か説明できる」レベルまで理解する（実務では眺める程度）

---

## 全体フェーズ一覧

- フェーズ0：リセット & 環境準備
- フェーズ1：S 必須項目（言語の核）
- フェーズ2：A 重要項目（Laravel の裏側）
- フェーズ3：B 余裕枠（強くなりたい用）
- フェーズ4：DI / DTrace / PIE
- フェーズ5：Laravel 実戦フェーズ

各フェーズは「読むだけ」で終わらせず、必ず「小さなファイルを書いて動かす」まで含める。

---

## フェーズ0：リセット & 環境準備

### 0-1. PHP 実行環境の整理

- [ ] `php -v` で利用バージョン確認（Sail とローカルの差を把握）
- [ ] プロジェクトとは別に **練習用ディレクトリ** を用意  
  例）`~/playground/php-basics` など
- [ ] VSCode の設定を整理（PHP / Intelephense / フォーマット）

### 0-2. 基本確認用スクリプト

- [ ] `hello.php` を作成し、以下を実行  
  - `echo "Hello PHP\n";`
  - 簡単な足し算 `echo 1 + 2;`
- [ ] `php hello.php` が通ることを確認

**完了条件**  
- 「PHP の練習用に、自由に壊せるディレクトリ」ができている  
- ターミナルから `php xxx.php` が普通に実行できる

---

## フェーズ1：S 必須項目（言語の核）

### 1-1. 基本文法

**PHP マニュアル参照：**  
- 言語リファレンス > 基本的な構文

**やること**
- [ ] PHP タグ（`<?php ... ?>`）の説明を読む
- [ ] コメント（`//`, `/* */`, `#`）の使い方を確認
- [ ] `use` / `namespace` の存在だけ先に軽く目を通す（詳細は後で）

**演習**
- [ ] `syntax.php` を作り、コメント + echo を混ぜて書いて実行

**完了条件**
- 「PHP ファイルの最小構成」を自分の言葉で説明できる

---

### 1-2. 型

**PHP マニュアル参照：**  
- 言語リファレンス > 型  
  - スカラ型（bool, int, float, string）  
  - 配列・オブジェクトの概要  

**やること**
- [ ] 各型の説明をざっくり読む（全部覚えようとしない）
- [ ] `declare(strict_types=1);` の存在を知る
- [ ] 型のキャスト（`(int)`, `(string)`）を一度確認

**演習**
- [ ] `types.php` を作り、各型を変数に代入し `var_dump()` で出力
- [ ] `strict_types` あり / なしの違いを簡単に試す

**完了条件**
- 「PHP の基本の型は何種類あるか」「`var_dump` の使い方」が言える

---

### 1-3. 配列

**PHP マニュアル参照：**  
- 配列  
- 配列関数（主要なものだけ）

**やること**
- [ ] インデックス配列 / 連想配列の違いを読む
- [ ] 多次元配列の例を読む
- [ ] 主要な配列関数の説明をざっと見る  
  - `array_merge`, `array_filter`, `array_map`, `in_array`, `isset`, `empty`

**演習**
- [ ] `arrays.php` を作る
  - 連想配列でユーザー情報（`name`, `age`, `email`）を作る
  - 配列の配列（ユーザー一覧）を作って `foreach` で回す
  - `array_filter` / `array_map` を実際に使ってみる

**完了条件**
- Laravel でよくある「連想配列の配列」が読める & 自分で作れる

---

### 1-4. 制御構造

**PHP マニュアル参照：**  
- 制御構造  
  - `if`, `elseif`, `switch`, `for`, `foreach`, `while`, `do-while`, `match`

**やること**
- [ ] `if` / `elseif` / `else` の基本を読む
- [ ] `foreach` の書き方（キー / 値）を確認
- [ ] `match` の文法に一度目を通す

**演習**
- [ ] `control.php` を作る
  - `foreach` でユーザー一覧をループ
  - `if` で条件分岐（例：年齢で条件分け）
  - 同じ処理を `match` でも書いてみる

**完了条件**
- `if` と `foreach` を使った簡単な処理が書ける

---

### 1-5. 関数

**PHP マニュアル参照：**  
- 関数  
  - 関数の定義  
  - 引数  
  - 戻り値  
  - デフォルト引数  
  - 可変長引数  
  - 無名関数 / クロージャ

**やること**
- [ ] 引数・戻り値の型宣言の書き方を読む  
  例：`function add(int $a, int $b): int {}`
- [ ] デフォルト引数のルールを確認
- [ ] 無名関数 / `use` をざっと読む

**演習**
- [ ] `functions.php` を作る
  - シンプルな計算関数を作る
  - 配列から「条件に合う要素を返す」関数を書く
  - `array_map` や `array_filter` に無名関数を渡して動かす

**完了条件**
- 自分で「引数と戻り値に型を付けた関数」が作れる

---

### 1-6. クラス

**PHP マニュアル参照：**  
- クラスとオブジェクト

**重点項目**
- クラス定義 / プロパティ / メソッド
- コンストラクタ
- アクセス修飾子（`public`, `private`, `protected`）
- 継承（`extends`）
- インターフェイス（`implements`）
- トレイト（詳細は後のフェーズで深掘り）

**やること**
- [ ] 基本的なクラス定義のサンプルを読む
- [ ] 継承とインターフェイスの例を読む
- [ ] トレイトの存在を確認する（内容は後で）

**演習**
- [ ] `classes.php` を作る
  - `User` クラス（`name`, `email`）を作成
  - コンストラクタで初期化し、`introduce()` メソッドで自己紹介を返す
  - `AdminUser` クラスを `User` から `extends` して権限を追加

**完了条件**
- `class`, `extends`, `implements` を使った簡単なクラスが書ける

---

### 1-7. 例外

**PHP マニュアル参照：**  
- 例外（Exceptions）

**やること**
- [ ] `try` / `catch` / `finally` の基本を読む
- [ ] 例外クラスの継承（`extends Exception`）の例を読む

**演習**
- [ ] `exceptions.php` を作る
  - わざと例外を投げる関数を書き `try` / `catch` でハンドリング
  - 独自例外クラスを作り、特定条件で投げてみる

**完了条件**
- `throw` / `try` / `catch` を使った簡単な例外処理を書ける

---

### 1-8. 演算子

**PHP マニュアル参照：**  
- 演算子  
  - 比較  
  - 論理  
  - 三項演算子  
  - Null 合体演算子（`??`）  
  - Nullsafe 演算子（`?->`）

**やること**
- [ ] `===` と `==` の違いを理解する
- [ ] `?:` と `??` の違いを確認
- [ ] `?->` の挙動を例で確認

**演習**
- [ ] `operators.php` 作成
  - `??` と `?:` を混ぜた例を複数書く  
  - オブジェクト or `null` に対して `?->` でアクセスする例を書く

**完了条件**
- Laravel / Blade でよく見る `??`, `?:`, `?->` の意味を説明できる

---

## フェーズ2：A 重要項目（Laravel の裏側）

### 2-1. トレイト

**PHP マニュアル参照：**  
- トレイト

**やること**
- [ ] トレイトの定義 / `use` の書き方を読む
- [ ] 複数トレイト利用 / メソッドコンフリクトの解決方法に目を通す

**演習**
- [ ] `traits.php` 作成
  - ログ出力用のトレイト `LogsMessage` を作る
  - 複数クラスで共通メソッドとして利用する

**完了条件**
- 「共通処理をトレイトに切り出す」という発想ができる

---

### 2-2. 名前空間

**PHP マニュアル参照：**  
- 名前空間  

**やること**
- [ ] `namespace` / `use` の役割を理解する
- [ ] グローバル名前空間の話をざっと読む

**演習**
- [ ] `namespaces/` ディレクトリを作成し、複数ファイルに分けてクラスを作る
- [ ] `use` を使って読み込んで実行

**完了条件**
- Laravel の `App\Http\Controllers` などの記述の意味がわかる

---

### 2-3. セッション

**PHP マニュアル参照：**  
- セッション

**やること**
- [ ] `session_start()` 〜 `$_SESSION` の基本を読む
- [ ] セッション ID と Cookie の関係を理解する

**演習**
- [ ] 超簡易版の「カウンター」を作る（ブラウザで更新するたびに +1）

**完了条件**
- Laravel が `session()` でラップしているものの正体をイメージできる

---

### 2-4. ファイル

**PHP マニュアル参照：**  
- ファイルシステム / ファイル処理  
  - `file_get_contents` / `file_put_contents`  
  - `fopen` / `fwrite` / `fclose`（軽くでOK）

**演習**
- [ ] `files.php`
  - テキストファイルにログを書き出す
  - 書き出した内容を読み込んで表示する

**完了条件**
- 「ファイルの読み書きの基本フロー」を説明できる

---

### 2-5. Cookie

**PHP マニュアル参照：**  
- クッキー（Cookies）

**やること**
- [ ] `setcookie` の挙動と引数の意味を読む
- [ ] Cookie がブラウザに保存される流れを理解する

**完了条件**
- Laravel の Cookie 関連機能の“土台”のイメージが持てる

---

### 2-6. HTTP の基本

**やること（外部情報でもOK）**
- [ ] HTTP メソッド（GET / POST / PUT / DELETE）を整理
- [ ] ステータスコードの代表的なもの（200 / 302 / 400 / 401 / 403 / 404 / 500）を確認
- [ ] ヘッダー / ボディ / クエリパラメータ の区別を押さえる

**完了条件**
- Request / Response を図に書いて説明できる

---

## フェーズ3：B 余裕枠（＋α で強くなる）

### 3-1. enum

**PHP マニュアル参照：**  
- 列挙型 (Enum)

**やること**
- [ ] `enum` の定義方法を読む
- [ ] `case` と値付き enum の違いを見る

**演習**
- [ ] ステータス（`Draft`, `Published`, `Archived` など）を enum で定義し、コードから利用してみる

---

### 3-2. アトリビュート

**PHP マニュアル参照：**  
- アトリビュート

**やること**
- [ ] `#[Attribute]` の定義・利用方法のサンプルを読む
- [ ] リフレクションと組み合わせる例を眺める（実装までは不要）

---

### 3-3. Composer オートロードの仕組み

**やること**
- [ ] `composer.json` の `autoload` セクションを読む
- [ ] PSR-4 の意味を調べる
- [ ] 自作クラスを `src/` に置き、 `composer dump-autoload` で読み込ませる

---

### 3-4. CLI

**やること**
- [ ] `php -v`, `php -m`, `php -S` の意味を確認
- [ ] 簡単な CLI スクリプト（引数を受け取って処理）を書いてみる

---

## フェーズ4：DI / DTrace / PIE

### 4-1. DI（依存性注入）

**目標**
- DI の考え方を理解し、Laravel でよくある Controller + Service + Repository 構成を自分で作れるようにする

**やること**
- [ ] 「依存性注入」の概念を調べる（コンストラクタインジェクションを中心に）
- [ ] インターフェイス + 実装クラスを用意する例を見る
- [ ] Laravel のサービスコンテナの説明を読む

**演習（Laravel プロジェクトでやる）**
- [ ] Repository インターフェイスと実装クラスを作る
- [ ] Service クラスを作り、Repository を DI する
- [ ] Controller に Service を DI して処理を呼ぶ
- [ ] `AppServiceProvider` などでバインドを設定してみる

**完了条件**
- 「Controller から直接 DB を触らず、Service / Repository を介す設計」ができる

---

### 4-2. DTrace

**目標**
- 「DTrace が何者かを説明できる」レベル

**やること**
- [ ] 「DTrace 動的トレーシング」の説明を読む
- [ ] PHP が DTrace でどのようなイベントを提供しているか眺める
- [ ] 実務ではほぼ使わないことを理解する（教養としての理解で十分）

**完了条件**
- 一言で「OS レベルで関数呼び出しなどを動的に追跡する仕組み」と説明できる

---

### 4-3. PIE

**目標**
- 「PHP 拡張モジュールを配布するための仕組みの一つ」として理解する

**やること**
- [ ] PIE が何の略か / 何を解決するための仕組みかを調べる
- [ ] 拡張モジュールと PECL / PIE の関係を軽く把握する
- [ ] 自分が日常の業務で触る可能性はほぼ無いことを理解する

**完了条件**
- 「C 言語で書かれた PHP 拡張を、どう扱うかの世界の話」として位置づけられる

---

## フェーズ5：Laravel 実戦フェーズ

### 5-1. コードリーディング

**やること**
- [ ] 自分のプロジェクトの Controller を 1つ選び、処理の流れをコメントで全部書き出す
- [ ] Model のリレーション定義を読む（`hasMany`, `belongsTo` など）
- [ ] Request クラス（バリデーション）を読む

**完了条件**
- 「このエンドポイントは何をしているか？」をコードから追って説明できる

---

### 5-2. 小さな機能を自力実装

**例**
- 簡易的な ToDo リスト
- お知らせ一覧 + 詳細表示
- 1テーブルの CRUD

**やること**
- [ ] ルーティング定義
- [ ] Controller / Request / Model （＋必要なら Service / Repository）
- [ ] Blade で簡単な一覧・登録フォーム

**完了条件**
- 1つの機能を「自分の設計で」 Laravel で作れる

---

## 最後に：進捗管理用チェックリスト

### フェーズ0
- [ ] 実行環境確認
- [ ] 練習ディレクトリ作成

### フェーズ1（S）
- [ ] 基本文法
- [ ] 型
- [ ] 配列
- [ ] 制御構造
- [ ] 関数
- [ ] クラス
- [ ] 例外
- [ ] 演算子

### フェーズ2（A）
- [ ] トレイト
- [ ] 名前空間
- [ ] セッション
- [ ] ファイル
- [ ] Cookie
- [ ] HTTP 基本

### フェーズ3（B）
- [ ] enum
- [ ] アトリビュート
- [ ] Composer オートロード
- [ ] CLI

### フェーズ4（追加）
- [ ] DI（Controller / Service / Repository を構成）
- [ ] DTrace の概要を理解
- [ ] PIE の概要を理解

### フェーズ5（実戦）
- [ ] 既存 Laravel コードの読み解き
- [ ] 小さな機能を 1 つ、自力で実装

---
